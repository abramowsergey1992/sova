function locationlist(){let t=$("#locations-map");$(".location-prev__gallery").each(function(){new Swiper(this,{speed:400,navigation:{nextEl:$(this).find(".location-prev__gallery-next")[0],prevEl:$(this).find(".location-prev__gallery-prev")[0]},spaceBetween:10})}),$(".location-map-prev__slider").each(function(){new Swiper(this,{speed:400,pagination:{el:$(this).find(".location-map-prev__slider-pagi")[0],type:"bullets",clickable:!0},spaceBetween:10})});let a;$.getJSON(t.data("json"),function(e){a=e,setTimeout(function(){var i=new ymaps.Map("locations-map",{center:[55.30954,37.721587],zoom:8,controls:[]},{searchControlProvider:"yandex#search"});function o(e){e.forEach(e=>{myPlacemark=new ymaps.Placemark(e.coord,{balloonContent:e.title},{id:e.id,balloonCloseButton:!1,hideIconOnBalloonOpen:!1,iconLayout:"default#image",iconImageHref:t.data("icon"),iconImageSize:[50,50],iconImageOffset:[-25,-25]}),myPlacemark.events.add(["balloonopen"],function(e){e.get("target").options.set("iconImageHref",t.data("activeicon")),console.log(e.get("target").geometry.getCoordinates()),console.log(e.get("target").options.get("id")),i.panTo(e.get("target").geometry.getCoordinates()),$(".location-map-prev").stop().slideUp(),$("#location-map-prev-"+e.get("target").options.get("id")).stop().slideDown()}),myPlacemark.events.add(["balloonclose"],function(e){e.get("target").options.set("iconImageHref",t.data("icon"))}),i.geoObjects.add(myPlacemark)})}$("#filter-city").change(function(){let e=$("#filter-city option:selected").data("coord");console.log(e),e.length&&null!=e&&(console.log(e.split(",")),i.panTo([parseFloat(e.split(",")[0]),parseFloat(e.split(",")[1])]))}),$("#filter-status, #filter-city").change(function(){let e=[];i.geoObjects.removeAll(),$(".location-map-prev").stop().slideUp(),e.push(a),console.log("s",a);let t=$("#filter-city option:selected").attr("value"),n=$("#filter-status option:selected").attr("value");"all"==t||null==t?$(".location-prev").removeClass("_city-hidden"):(e.filter(function(e){return e.city==t}),$(".location-prev").each(function(){t==$(this).data("city")?$(this).removeClass("_city-hidden"):$(this).addClass("_city-hidden")})),console.log("loca",e),"all"==n||null==n?$(".location-prev").removeClass("_status-hidden"):(e.filter(function(e){return 0<=e.tags.indexOf(n)}),$(".location-prev").each(function(){0<=$(this).data("status").split("|").indexOf(n)?$(this).removeClass("_status-hidden"):$(this).addClass("_status-hidden")})),o(e)}),o(e.locations)},2e3)})}function locationPage(){$(".location-top__down").click(function(){$("html, body").stop().animate({scrollTop:window.innerHeight},500,"swing",function(){})})}function aosInit(){AOS.init({disable:!1,startEvent:"DOMContentLoaded",initClassName:"aos-init",animatedClassName:"aos-animate",useClassNames:!1,disableMutationObserver:!1,debounceDelay:50,throttleDelay:99,offset:120,delay:0,duration:600,easing:"ease",once:!0,mirror:!1,anchorPlacement:"top-bottom"})}function bigslider(){$(".big-slider").each(function(){let e=$(this);e.find(".big-slider__thumb-slider").html(e.find(".big-slider__full-slider").html());var t=new Swiper(e.find(".big-slider__thumb-slider")[0],{slidesPerView:8,loop:!0,spaceBetween:28,watchSlidesProgress:!0,breakpoints:{320:{slidesPerView:"auto"},992:{slidesPerView:7},1300:{slidesPerView:8}}});const n=new Swiper(e.find(".big-slider__content-slider")[0],{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},spaceBetween:28,allowTouchMove:!1});new Swiper(e.find(".big-slider__full-slider")[0],{slidesPerView:1,spaceBetween:10,loop:!0,pagination:{el:e.find(".big-slider__pagination")[0],type:"fraction"},navigation:{nextEl:e.find(".big-slider__bottom-nav-next")[0],prevEl:e.find(".big-slider__bottom-nav-prev")[0]},thumbs:{swiper:t},on:{slideChange:function(e){n.slideTo(e.realIndex)}}})})}function feedbackForm(){$("#feedback-form").validate({errorPlacement:function(e,t){},submitHandler:function(e){$("#feedback-form .btn-1").attr("disabled","disabled"),$.ajax({url:$(e).attr("action"),data:$(e).serialize(),method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},context:document.body,success:function(){popupOpen("#feedback-popup-thanks"),$("#feedback-form .btn-1").removeAttr("disabled")},error:function(){popupOpen("#feedback-popup-error"),$("#feedback-form btn-1").removeAttr("disabled")}})}})}function form(){$("._mask-int").each(function(){Inputmask("9{1,5}").mask(this)}),$("._mask-oneint").each(function(){Inputmask({mask:"9",placeholder:""}).mask(this)}),$("._mask-phone").each(function(){Inputmask("+7 (999) 999-99-99").mask(this)}),$("._mask-time").each(function(){Inputmask("9{1,2}:9{1,2}").mask(this)}),$("._mask-date,._mask-calendar").each(function(){Inputmask("99.99.9999").mask(this)}),$(".select2").select2({minimumResultsForSearch:-1}),document.querySelectorAll(".btn-1,.btn-2,.btn-3, .btn-4").forEach(e=>e.innerHTML="<span class='button-content'><span>"+e.textContent+"</span><span>"+e.textContent+"</span></span>")}function header(){let e=$(".header__hidden-menu");$(".header__menu-btn").click(function(){$(this).toggleClass("_open"),$(this).hasClass("_open")?e.stop().slideDown({start:function(){$(this).css({display:"flex"})}}):e.stop().slideUp()})}function mixiltup(){$(".mixiltup").length&&mixitup(".mixiltup",{selectors:{target:".mix"}})}$(function(){}),$(function(){}),$(function(){}),$(function(){}),$(function(){}),$(function(){});var vh=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${vh}px`);var width=window.innerWidth;function popupClose(e){let t=$(e);t.removeClass("_animate"),setTimeout(function(){t.removeClass("_display")},400)}function popupOpen(e){$(".popup._display").length&&$(".popup._display").each(function(){popupClose("#"+$(this).attr("id"))});let t=$(e);t.addClass("_display"),setTimeout(function(){t.addClass("_animate")},100)}function popup(){$("[data-popup]").click(function(){popupOpen($(this).data("popup"))}),$(".popup__overlay ,.popup__close").click(function(){console.log("#"+$(this).closest(".popup").attr("id")),popupClose("#"+$(this).closest(".popup").attr("id"))})}function video(){$(".video-click-play").click(function(){this.play()})}function paginator(){$(".paginator__more").click(function(){$(this).closest(".paginator").addClass("_view-hidden")})}window.addEventListener("resize",()=>{var e;width!=window.innerWidth&&(e=.01*window.innerHeight,document.documentElement.style.setProperty("--vh",`${e}px`),width=window.innerWidth)}),$(function(){header(),form(),aosInit(),paginator(),bigslider(),locationlist(),mixiltup(),popup(),video(),feedbackForm(),locationPage()}),$(function(){});